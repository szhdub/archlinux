<!doctype html>
<html lang="en-us">

<head>
  <meta charset="utf-8">

  <link rel="stylesheet" type="text/css" href="css/normalize.css" />

  <link rel="stylesheet" type="text/css" href="css/roboto.css" />

  <link rel="stylesheet" type="text/css" href="css/SingleDatePicker.css" />

  <link rel="icon" href="images/qiu.ico" type="image/x-icon">


  <style type="text/css">
    *,
    *:before,
    *:after {
      box-sizing: border-box;
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
      -ms-box-sizing: border-box;
    }
  </style>
  <meta name="referrer" content="never">
</head>

<body>
  <div class="container">
    <div id="basic">
    </div>
  </div>
  <script src="elm.js"></script>
  <script>
	var storedState = localStorage.getItem('save-token');
    console.log("恢复的数据: ", storedState);
    var startingState = storedState ? JSON.parse(storedState) : null;

    var app = Elm.Main.init({ 
		node: document.getElementById("basic"),
		flags: startingState
	});

	app.ports.storeToken.subscribe(function(posts) {
		if (posts.length > 0) {
            var postsJson = JSON.stringify(posts);
            localStorage.setItem('save-token', postsJson);
            console.log("保存的数据: ", postsJson);
        }
    });

  </script>
</body>


</html>